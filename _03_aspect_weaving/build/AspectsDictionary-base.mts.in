// #region preamble
import type { Class } from "type-fest";

import type {
  PushableArray
} from "#stage_utilities/source/types/Utility.mjs";

import type {
  ClassDecoratorFunction
} from "#stage_utilities/source/types/ClassDecoratorFunction.mjs";

import type {
  MethodsOnlyInternal
} from "#stub_classes/source/base/types/MethodsOnlyInternal.mjs";

import type {
  VoidMethodsOnly,
} from "#stub_classes/source/base/types/export-types.mjs";

import {
  ASPECTS_BUILDER,
  ASPECTS_DICTIONARY,
} from "../stubs/symbol-keys.mjs";

import type {
  IndeterminateClass
} from "../stubs/decorators/IndeterminateReturn.mjs";

// #endregion preamble

export type AspectBuilderField<Type extends MethodsOnlyInternal> = {
  [ASPECTS_DICTIONARY]: AspectsDictionary<Type>;
  get [ASPECTS_BUILDER](): AspectsBuilder<Type>;
};

export type ClassWithAspects<Type extends MethodsOnlyInternal> = (
  Class<Type & AspectBuilderField<Type>, [Type]> &
  {
    [ASPECTS_BUILDER]: AspectsBuilder<Type>;
  }
);

export class AspectsDictionary<Type extends MethodsOnlyInternal> {
//@ASPECTS_DICTIONARY_FIELDS
}

export class AspectsBuilder<Type extends MethodsOnlyInternal> {
//@ASPECTS_BUILDER_FIELDS
  constructor(baseBuilder: AspectsBuilder<Type> | null) {
    if (baseBuilder) {
//@ASPECTS_BUILDER_CONSTRUCTOR
    }
  }
}

export function buildAspectDictionary<
  Type extends MethodsOnlyInternal,
  AspectInstance extends Type & AspectBuilderField<Type>
>
(
  __wrapped__: Type,
  __instance__: AspectInstance
) : AspectsDictionary<Type>
{
  const __dictionary__ = new AspectsDictionary<Type>;
  const __builder__: AspectsBuilder<Type> = __instance__[ASPECTS_BUILDER];

//@ASPECTS_BUILDER_FOREACH
  return __dictionary__;
}

interface AspectDecoratorsInterface<Type extends MethodsOnlyInternal> {
//@ASPECTS_DECORATORS_INTERFACE
}

export class AspectDecorators<Type extends MethodsOnlyInternal>
implements AspectDecoratorsInterface<Type>
{
//@ASPECTS_DECORATORS_CLASS
}

export const AspectsBuilderKeys: ReadonlyArray<string> = [
//@ASPECTS_BUILDER_KEYS
];
